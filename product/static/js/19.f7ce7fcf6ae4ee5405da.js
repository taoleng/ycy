webpackJsonp([19],{BHgg:function(e,t){},tlFS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("gwNS"),l=n("+zM7"),o={components:{tlMap:n("Rzgu").a},data:function(){return{pageIndex:1,TotalCount:0,pageSize:8,tableData:[],loading:!0,dialogFlag:!1,formInline:{CompanyName:"",IinvoiceUserCode:"",AccountBankName:"",AccountNo:"",Province:"",City:"",Address:"",CompanyTel:"",NickName:"",Mobile:"",InvoiceUserType:"",InvoiceType:"",ReceivingProvince:"",ReceivingCity:"",ReceivingAddress:"",ID:""},userInfo:{}}},created:function(){this.getList(),this.userInfo=JSON.parse(localStorage.getItem("LddUserInfo")),this.formInline.InvoiceUserType=0==this.userInfo.UserType?"个人":"企业"},filters:{time:function(e){return"string"==typeof e?e.substr(0,16):e}},methods:{save:function(){var e=this,t=this.formInline,n=this.$loading({lock:!0,text:"正在取消订单，请稍等...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(i.T)(t).then(function(t){e.dialogFlag=!1,n.close(),1==t.Code?(l.a.toast({type:"success",message:"操作成功"}),window.location.reload()):l.a.toast(t.Msg)}),console.log(this.formInline)},add:function(){this.dialogFlag=!0,this.formInline.CompanyName="",this.formInline.IinvoiceUserCode="",this.formInline.AccountBankName="",this.formInline.AccountNo="",this.formInline.Province="",this.formInline.City="",this.formInline.Address="",this.formInline.CompanyTel="",this.formInline.NickName=this.userInfo.Name,this.formInline.Mobile=this.userInfo.Mobile,this.formInline.InvoiceUserType=0==this.userInfo.UserType?"个人":"企业",this.formInline.InvoiceType="",this.formInline.ReceivingProvince="",this.formInline.ReceivingCity="",this.formInline.ReceivingAddress="",this.formInline.ID=""},sAddress:function(e){this.formInline.Province=e.province,this.formInline.City=e.city,this.formInline.Address=e.address},eAddress:function(e){this.formInline.ReceivingProvince=e.province,this.formInline.ReceivingCity=e.city,this.formInline.ReceivingAddress=e.address},beforeHandleCommand:function(e,t,n){return{row:e,command:t,index:n}},handleCommand:function(e,t){switch(e.command){case"a":this.handleEdit(e.row);break;case"b":this.handleRemove(e.row,e.index)}},handleEdit:function(e){this.dialogFlag=!0,this.formInline={CompanyName:e.CompanyName,IinvoiceUserCode:e.IinvoiceUserCode,AccountBankName:e.AccountBankName,AccountNo:e.AccountNo,Province:e.Province,City:e.City,Address:e.Address,CompanyTel:e.CompanyTel,NickName:e.NickName,Mobile:e.Mobile,InvoiceUserType:1==e.InvoiceUserType?"个人":"企业",InvoiceType:1==e.InvoiceType?"普票":"专票",ReceivingProvince:e.ReceivingProvince,ReceivingCity:e.ReceivingCity,ReceivingAddress:e.ReceivingAddress,ID:e.ID}},handleRemove:function(e,t){var n=this;console.log(t),this.$confirm("您确定删除此条信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={ID:e.ID},a=n.$loading({lock:!0,text:"正在删除，请稍等...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(i.p)(o).then(function(e){a.close(),1==e.Code?n.tableData.splice(t,1):l.a.toast(e.Msg)})}).catch(function(e){})},getList:function(){var e=this;this.loading=!0,Object(i.v)().then(function(t){e.loading=!1,1==t.Code&&(e.tableData=t.Data)})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"order"},[n("div",{staticClass:"title"},[e._v("发票抬头管理")]),e._v(" "),n("div",{staticStyle:{margin:"10px 20px"}},[n("el-button",{attrs:{type:"warning"},on:{click:e.add}},[e._v("新增发票抬头")])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"orderTable"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[n("el-table-column",{attrs:{label:"联系人",width:"100",align:"center","tooltip-effect":"dark"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.NickName||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"联系电话",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.Mobile||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位名称",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"oneline",attrs:{title:t.row.CompanyName}},[e._v(e._s(t.row.CompanyName||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"发票类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"orderStatus"},[e._v(e._s(t.row.InvoiceUserTypeName||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"纳税人识别号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(t.row.IinvoiceUserCode||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"开户行",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"oneline",attrs:{title:t.row.AccountBankName}},[e._v(e._s(t.row.AccountBankName||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"开户账号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"orderStatus"},[e._v(e._s(t.row.AccountNo||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"公司电话",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"orderStatus cur"},[e._v(e._s(t.row.CompanyTel||"---"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("操作")]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(t.row,"a",t.$index)},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand(t.row,"b",t.$index)},on:{click:function(n){return e.handleRemove(t.$index,t.row)}}},[e._v("删除")])],1)],1)]}}])})],1),e._v(" "),e.TotalCount>e.pageSize?n("el-pagination",{attrs:{"page-size":e.pageSize,background:"",layout:"prev, pager, next",total:e.TotalCount},on:{"current-change":e.change}}):e._e()],1),e._v(" "),e.dialogFlag?n("div",{staticClass:"v-modal",staticStyle:{"z-index":"99"}}):e._e(),e._v(" "),e.dialogFlag?n("div",{staticClass:"el-dialog__wrapper",staticStyle:{"z-index":"100"}},[n("div",{staticClass:"el-dialog",staticStyle:{"margin-top":"15vh"}},[n("div",{staticClass:"el-dialog__header"},[n("span",{staticClass:"el-dialog__title"},[e._v("申请发票")]),e._v(" "),n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button"}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close",on:{click:function(t){e.dialogFlag=!1}}})])]),e._v(" "),n("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px"}},[n("div",{staticClass:"flex demoItem"},[0==e.userInfo.UserType?n("el-form-item",{staticClass:"flex-1",attrs:{label:"开具类型"}},[n("el-select",{attrs:{placeholder:"请选择开具类型"},model:{value:e.formInline.InvoiceUserType,callback:function(t){e.$set(e.formInline,"InvoiceUserType",t)},expression:"formInline.InvoiceUserType"}},[n("el-option",{attrs:{label:"个人",value:"个人"}}),e._v(" "),n("el-option",{attrs:{label:"企业",value:"企业"}})],1)],1):e._e(),e._v(" "),1==e.userInfo.UserType?n("el-form-item",{staticClass:"flex-1",attrs:{label:"发票类型"}},[n("el-select",{attrs:{placeholder:"请选择发票类型"},model:{value:e.formInline.InvoiceType,callback:function(t){e.$set(e.formInline,"InvoiceType",t)},expression:"formInline.InvoiceType"}},[n("el-option",{attrs:{label:"普票",value:"普票"}}),e._v(" "),n("el-option",{attrs:{label:"专票",value:"专票"}})],1)],1):e._e()],1),e._v(" "),n("div",{staticClass:"flex demoItem"},[n("el-form-item",{staticClass:"flex-1",attrs:{label:"联系人"}},[n("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.formInline.NickName,callback:function(t){e.$set(e.formInline,"NickName",t)},expression:"formInline.NickName"}})],1),e._v(" "),n("el-form-item",{staticClass:"flex-1",attrs:{label:"联系电话"}},[n("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.formInline.Mobile,callback:function(t){e.$set(e.formInline,"Mobile",t)},expression:"formInline.Mobile"}})],1)],1),e._v(" "),1==e.userInfo.UserType?n("div",{staticClass:"flex demoItem"},[n("el-form-item",{staticClass:"flex-1",attrs:{label:"企业名称"}},[n("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.formInline.CompanyName,callback:function(t){e.$set(e.formInline,"CompanyName",t)},expression:"formInline.CompanyName"}})],1),e._v(" "),n("el-form-item",{staticClass:"flex-1",attrs:{label:"纳税号"}},[n("el-input",{attrs:{placeholder:"请输入纳税人识别号"},model:{value:e.formInline.IinvoiceUserCode,callback:function(t){e.$set(e.formInline,"IinvoiceUserCode",t)},expression:"formInline.IinvoiceUserCode"}})],1)],1):e._e(),e._v(" "),1==e.userInfo.UserType?n("div",{staticClass:"flex demoItem"},[n("el-form-item",{staticClass:"flex-1",attrs:{label:"开户银行"}},[n("el-input",{attrs:{placeholder:"请输入开户银行"},model:{value:e.formInline.AccountBankName,callback:function(t){e.$set(e.formInline,"AccountBankName",t)},expression:"formInline.AccountBankName"}})],1),e._v(" "),n("el-form-item",{staticClass:"flex-1",attrs:{label:"开户账号"}},[n("el-input",{attrs:{placeholder:"请输入开户账号"},model:{value:e.formInline.AccountNo,callback:function(t){e.$set(e.formInline,"AccountNo",t)},expression:"formInline.AccountNo"}})],1)],1):e._e(),e._v(" "),1==e.userInfo.UserType?n("div",{staticClass:"flex demoItem"},[n("el-form-item",{staticClass:"flex-1",attrs:{label:"注册地址"}},[n("tl-map",{attrs:{title:"请输入注册地址",strValue:e.formInline.Address},on:{getAddress:e.sAddress}})],1),e._v(" "),n("el-form-item",{staticClass:"flex-1",attrs:{label:"注册电话"}},[n("el-input",{attrs:{placeholder:"请输入注册电话"},model:{value:e.formInline.CompanyTel,callback:function(t){e.$set(e.formInline,"CompanyTel",t)},expression:"formInline.CompanyTel"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"flex demoItem"},[n("el-form-item",{staticClass:"flex-1",attrs:{label:"收票地址"}},[n("tl-map",{attrs:{title:"请输入收票地址",strValue:e.formInline.ReceivingAddress},on:{getAddress:e.eAddress}})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{width:"150px"},attrs:{type:"warning"},on:{click:e.save}},[e._v("保存")])],1)])],1)]):e._e()])},staticRenderFns:[]};var s=n("VU/8")(o,a,!1,function(e){n("BHgg")},"data-v-53beed16",null);t.default=s.exports}});
//# sourceMappingURL=19.f7ce7fcf6ae4ee5405da.js.map