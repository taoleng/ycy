webpackJsonp([3],{"+pio":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),l=a("Gu7T"),n=a.n(l),o=a("gwNS"),r=a("+zM7");var f={data:function(){return{id:"",activeName:"1",info:{},carInfo:{},hay:{},loading:!0,submitFlag:!1}},filters:{orderStatus:function(t){return r.a.orderStatus(t)}},created:function(){this.id=this.$route.query.id,this.getDetail(),this.getCarOrder()},methods:{submit:function(){this.submitFlag=!0;var t={startTime:this.info.StartTime,money:this.info.EarnestMoney,startAddress:this.info.StartPositionAddress,endAddress:this.info.EndPostionAddress};1==this.info.OrderStatus?t.money=this.info.EarnestMoney:3!=this.info.OrderStatus&&4!=this.info.OrderStatus||(t.money=this.info.DebtMoney),localStorage.setItem("LddPayInfo",s()(t)),1==this.info.OrderStatus?this.$router.push({path:"/pay?id="+encodeURIComponent(this.info.IdName)+"&m="+t.money+"&bt="+this.info.BusinessType+"&ot=1"}):3!=this.info.OrderStatus&&4!=this.info.OrderStatus||this.$router.push({path:"/pay?id="+encodeURIComponent(this.info.IdName)+"&m="+t.money+"&bt="+this.info.BusinessType+"&ot=2"}),this.submitFlag=!1},getDetail:function(){var t=this,e={id:this.id};Object(o.z)(e).then(function(e){1==e.Code?(t.info=e.Data,t.info.TravelType=t.info.TravelType.toString(),t.info.TravelFormType=t.info.TravelFormType.toString(),t.info.StartDate=new Date(t.info.StartTime.replace(/\-/g,"/")).format("yyyy-MM-dd"),t.info.EndDate=new Date(t.info.EndTime.replace(/\-/g,"/")).format("yyyy-MM-dd")):r.a.toast(e.Msg)})},getCarOrder:function(){var t=this,e={id:this.id};Object(o.s)(e).then(function(e){if(t.loading=!1,1==e.Code){t.carInfo=e.Data[0],t.carInfo.title=e.Data[0].CarNo+" "+e.Data[0].CarSeat+"座|"+e.Data[0].CarBrandName+"|"+e.Data[0].CarYearName;var a=JSON.parse(t.carInfo.RouteInfo).RouteList;t.hay=function(t){var e=[],a=[];t.forEach(function(t,i){console.log(t),e[t.Date]||(e[t.Date]=1,a.push({Arrival:t.Date,child:[]}))});for(var i=0;i<a.length;i++)for(var s=a[i],l=0;l<t.length;l++){var o,r=t[l];s.Arrival==r.Date&&(o=s.child).push.apply(o,n()(r.RouteItem))}return a}(a),console.log(t.hay)}else r.a.toast(e.Msg)})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"busDetail"},[a("div",{staticClass:"busMain flex flex-pack-justify w1200"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"left"},[a("div",{staticClass:"ydInfo"},[a("div",{staticClass:"busTitle"},[t._v("预定信息")]),t._v(" "),a("el-form",{attrs:{model:t.info,"label-width":"80px"}},[a("div",{staticClass:"flex flex-pack-justify"},[a("el-form-item",{staticClass:"flex-1",attrs:{label:"订单状态"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("orderStatus")(t.info.OrderStatus))+"\n\t\t\t\t\t\t")]),t._v(" "),a("el-form-item",{staticClass:"flex-1",attrs:{label:"包车方式"}},[a("el-radio-group",{model:{value:t.info.TravelType,callback:function(e){t.$set(t.info,"TravelType",e)},expression:"info.TravelType"}},[2==t.info.TravelType?a("el-radio",{attrs:{border:"",label:"2"}},[a("span",[t._v("往返")])]):t._e(),t._v(" "),1==t.info.TravelType?a("el-radio",{attrs:{border:"",label:"1"}},[a("span",[t._v("单程")])]):t._e()],1)],1),t._v(" "),a("el-form-item",{staticClass:"flex-1",attrs:{label:"包车类别"}},[a("el-radio-group",{model:{value:t.info.TravelFormType,callback:function(e){t.$set(t.info,"TravelFormType",e)},expression:"info.TravelFormType"}},[0==t.info.TravelFormType?a("el-radio",{attrs:{border:"",label:"0"}},[a("span",[t._v("全包")])]):t._e(),t._v(" "),1==t.info.TravelFormType?a("el-radio",{attrs:{border:"",label:"1"}},[a("span",[t._v("半包")])]):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[a("div",{staticClass:"flex flex-1 flex-pack-justify"},[2==t.info.TravelType||1!=t.info.IsThrough?a("el-form-item",{staticClass:"flex-1",attrs:{label:"出发时间"}},[a("el-input",{attrs:{readonly:"","suffix-icon":"el-icon-time"},model:{value:t.info.StartTime,callback:function(e){t.$set(t.info,"StartTime",e)},expression:"info.StartTime"}})],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"flex-1",attrs:{label:"到达时间"}},[a("el-input",{attrs:{readonly:"","suffix-icon":"el-icon-time"},model:{value:t.info.EndTime,callback:function(e){t.$set(t.info,"EndTime",e)},expression:"info.EndTime"}})],1)],1),t._v(" "),a("div",{staticClass:"flex flex-1 flex-pack-justify"},[a("el-form-item",{staticClass:"flex-1",attrs:{label:"出发地址"}},[a("el-input",{attrs:{placeholder:"请输入内容",readonly:"","suffix-icon":"el-icon-location-outline"},model:{value:t.info.StartPositionAddress,callback:function(e){t.$set(t.info,"StartPositionAddress",e)},expression:"info.StartPositionAddress"}})],1),t._v(" "),a("el-form-item",{staticClass:"flex-1",staticStyle:{"margin-bottom":"0"},attrs:{label:"目的地址"}},[a("el-input",{attrs:{placeholder:"请输入内容",readonly:"","suffix-icon":"el-icon-location-outline"},model:{value:t.info.EndPostionAddress,callback:function(e){t.$set(t.info,"EndPostionAddress",e)},expression:"info.EndPostionAddress"}})],1)],1)])])])],1),t._v(" "),a("div",{staticClass:"xcInfo"},[a("div",{staticClass:"busTitle"},[t._v("行程信息")]),t._v(" "),a("div",{staticClass:"xcInfo-main"},[a("div",{staticClass:"release"},[a("div",{staticClass:"releaseHalfway"},[a("div",{staticClass:"title flex flex-pack-justify startHalfway"},[a("div",{staticClass:"halfway"},[t._v("出发地     "+t._s(t.info.StartDate))])]),t._v(" "),a("div",{staticClass:"releaseHalfway-item flex"},[a("div",{staticClass:"flex-1"},[t._v("出发地址："+t._s(t.info.StartPositionAddress))]),t._v(" "),a("div",{staticClass:"flex-1"},[t._v("出发时间："+t._s(t.info.StartTime))])]),t._v(" "),t._l(t.hay,function(e){return e.Arrival==t.info.StartDate?t._l(e.child,function(e){return 2==e.AddressMold?a("div",{staticClass:"releaseHalfway-item flex"},[a("div",[t._v("途径地址：")]),t._v(" "),a("div",[t._v(t._s(e.Address))])]):t._e()}):t._e()}),t._v(" "),t._l(t.hay,function(e){return e.Arrival==t.info.StartDate&&e.Arrival==t.info.EndDate||!e.child.length?t._e():[a("div",{staticClass:"title flex flex-pack-justify midHalfway"},[t._v("途经地 "+t._s(e.Arrival))]),t._v(" "),t._l(e.child,function(e){return 2==e.AddressMold?a("div",{staticClass:"releaseHalfway-item flex"},[a("div",[t._v("途径地址：")]),t._v(" "),a("div",[t._v(t._s(e.Address))])]):t._e()})]}),t._v(" "),t._l(t.hay,function(e){return e.Arrival==t.info.EndDate&&e.Arrival!=t.info.StartDate&&e.child.length?t._l(e.child,function(e){return 2==e.AddressMold?a("div",{staticClass:"releaseHalfway-item flex"},[a("div",[t._v("途径地址：")]),t._v(" "),a("div",[t._v(t._s(e.Address))])]):t._e()}):t._e()}),t._v(" "),a("div",{staticClass:"title flex flex-pack-justify endHalfway"},[a("div",{staticClass:"halfway"},[t._v("目的地     "+t._s(t.info.EndDate))])]),t._v(" "),a("div",{staticClass:"releaseHalfway-item flex"},[a("div",{staticClass:"flex-1"},[t._v("还车地址："+t._s(t.info.StartPositionAddress))]),t._v(" "),a("div",{staticClass:"flex-1"},[t._v("还车时间："+t._s(t.info.EndTime))])])],2)])])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"right"},[a("div",{staticClass:"carInfo"},[a("div",{staticClass:"busTitle"},[t._v("车辆信息")]),t._v(" "),a("el-collapse",{staticClass:"el-collapses",attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:t.carInfo.title,name:"1"}},[a("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.carInfo.ExteriorImg,expression:"carInfo.ExteriorImg",arg:"background-image"}],staticClass:"img"}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("客运企业")]),t._v(" "),a("el-col",{attrs:{span:14}},[t._v(t._s(t.info.EnterpriseName))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("车队联系人")]),t._v(" "),a("el-col",{attrs:{span:14}},[t._v(t._s(t.carInfo.JdContact)+" "+t._s(t.carInfo.JdPhone))])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("司机信息")]),t._v(" "),a("el-col",{attrs:{span:14}},[t._v(t._s(t.carInfo.DriverName)+" "+t._s(t.carInfo.DriverContect))])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"fyInfo"},[a("div",{staticClass:"busTitle"},[t._v("费用明细")]),t._v(" "),a("div",{staticClass:"fyInfo-mod"},[a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("预计总时间")]),t._v(" "),a("div",[t._v(t._s(t.info.TotalTime)+"小时")])]),t._v(" "),a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("预计总里程")]),t._v(" "),a("div",[t._v(t._s(t.info.Totalkilor)+"公里")])]),t._v(" "),t.info.SupplementMoneyNew>0?a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("补单金额")]),t._v(" "),a("div",[t._v(t._s(t.info.SupplementMoneyNew)+"元")])]):t._e(),t._v(" "),3==t.info.OrderStatus||4==t.info.OrderStatus||5==t.info.OrderStatus?a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("已收款")]),t._v(" "),a("div",[t._v(t._s(t.info.PayMoney)+"元")])]):t._e(),t._v(" "),3==t.info.OrderStatus||4==t.info.OrderStatus?a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("下欠款")]),t._v(" "),a("div",[t._v(t._s(t.info.DebtMoney)+"元")])]):t._e(),t._v(" "),5==t.info.OrderStatus?[a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("违约金")]),t._v(" "),a("div",[t._v(t._s(t.info.PenaltyMoney)+"元")])]),t._v(" "),a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("应退款")]),t._v(" "),a("div",[t._v(t._s(t.info.PayMoney-t.info.PenaltyMoney)+"元")])]),t._v(" "),a("div",{staticClass:"flex flex-pack-justify"},[a("div",[t._v("已退款")]),t._v(" "),a("div",[t._v(t._s(t.info.RefundMoney)+"元")])])]:t._e(),t._v(" "),a("div",{staticClass:"flex flex-end moneyTitle"},[t._m(0),t._v(" "),a("div",{staticClass:"flex-1"},[a("div",{staticClass:"money"},[t._v("￥"+t._s(t.info.TotalMoney))]),t._v(" "),a("div",{staticClass:"oldMoney"},[t._v("￥"+t._s(t.info.EarnestMoney))])])]),t._v(" "),a("div",{staticClass:"flex flex-pack-center"},[1==t.info.OrderStatus&&t.info.EarnestMoney>0?a("el-button",{attrs:{type:"danger",loading:t.submitFlag},on:{click:t.submit}},[t._v("支付定金")]):t._e(),t._v(" "),(3==t.info.OrderStatus||4==t.info.OrderStatus)&&t.info.DebtMoney>0&&0==t.info.BillType?a("el-button",{attrs:{type:"danger",loading:t.submitFlag},on:{click:t.submit}},[t._v("支付下欠款")]):t._e()],1)],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex-1"},[e("div",{staticClass:"total"},[this._v("包车金额")]),this._v(" "),e("div",{staticClass:"zf"},[this._v("包车定金")])])}]};var v=a("VU/8")(f,d,!1,function(t){a("lGHH")},null,null);e.default=v.exports},"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var i,s=a("c/Tr"),l=(i=s)&&i.__esModule?i:{default:i};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,l.default)(t)}},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var i=a("evD5"),s=a("X8DO");t.exports=function(t,e,a){e in t?i.f(t,e,s(0,a)):t[e]=a}},lGHH:function(t,e){},qyJz:function(t,e,a){"use strict";var i=a("+ZMJ"),s=a("kM2E"),l=a("sB3e"),n=a("msXi"),o=a("Mhyx"),r=a("QRG4"),f=a("fBQ2"),d=a("3fs2");s(s.S+s.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,s,v,c=l(t),_="function"==typeof this?this:Array,u=arguments.length,y=u>1?arguments[1]:void 0,m=void 0!==y,p=0,x=d(c);if(m&&(y=i(y,u>2?arguments[2]:void 0,2)),void 0==x||_==Array&&o(x))for(a=new _(e=r(c.length));e>p;p++)f(a,p,m?y(c[p],p):c[p]);else for(v=x.call(c),a=new _;!(s=v.next()).done;p++)f(a,p,m?n(v,y,[s.value,p],!0):s.value);return a.length=p,a}})}});
//# sourceMappingURL=3.25be78c8cb44c8602bf2.js.map