{"version":3,"sources":["webpack:///src/components/user/protocolBill/unsettle.vue","webpack:///./src/components/user/protocolBill/unsettle.vue?4477","webpack:///./src/components/user/protocolBill/unsettle.vue"],"names":["unsettle","data","search","id","time","key","pageIndex","TotalCount","pageSize","tableData","info","total","TotalMoney","DebtMoney","payMoney","loading","idList","created","this","getList","filters","str","substr","orderStatus","num","tl","settleType","methods","settlement","_this","list","join","$loading","lock","text","spinner","background","Object","api","then","res","close","Code","localStorage","removeItem","routeUrl","$router","resolve","path","encodeURIComponent","Data","window","open","href","toast","Msg","handleSelectionChange","e","money","forEach","item","BalanceMoney","push","ID","change","val","_this2","PageIndex","PageSize","StartTime","EndTime","Key","length","DataExpand","onSubmit","protocolBill_unsettle","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","inline","model","label","staticStyle","width","placeholder","value","callback","$$v","$set","expression","value-format","type","start-placeholder","end-placeholder","default-time","on","click","directives","name","rawName","_s","plain","tooltip-effect","header-cell-style","color","selection-change","align","scopedSlots","_u","fn","scope","row","_f","InsertTime","StartPositionCityName","EndPostionCityName","EarnestMoney","OrderStatus","label-position","TravelTypeName","TravelFormTypeName","EnterpriseName","ReceivedMoney","SettleType","page-size","layout","current-change","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.347516f1a5b24d4a9388.js","sourcesContent":["<template>\r\n\t<div class=\"order\">\r\n\t\t<div class=\"title\">未结算订单查询</div>\r\n\t\t<el-form :inline=\"true\" :model=\"search\" class=\"demo-form-inline\">\r\n\t\t\t<el-form-item label=\"订单编号\">\r\n\t\t\t\t<el-input style=\"width: 180px;\" v-model=\"search.id\" placeholder=\"订单编号\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"下单时间\">\r\n\t\t\t\t<el-date-picker style=\"width: 250px;\" v-model=\"search.time\" value-format=\"yyyy-MM-dd HH:mm:ss\" type=\"daterange\"\r\n\t\t\t\t start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" :default-time=\"['00:00:00', '23:59:59']\">\r\n\t\t\t\t</el-date-picker>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"关键字\">\r\n\t\t\t\t<el-input style=\"width: 170px;\" v-model=\"search.key\" placeholder=\"客企名\\员工名称\\行程\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" :loading=\"loading\" @click=\"onSubmit\">查询</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t\t<div class=\"orderTable\" v-loading=\"loading\">\r\n\t\t\t<div class=\"result flex flex-pack-justify\">\r\n\t\t\t\t<div>结果汇总：当前数据 <span class=\"red\">{{info.total}}</span> 条，订单总金额 <span class=\"red\">{{info.TotalMoney}}</span> 元，下欠金额\r\n\t\t\t\t\t<span class=\"red\">{{info.DebtMoney}}</span> 元</div>\r\n\t\t\t\t<div>应付总额：<span class=\"red\">{{info.payMoney}}</span>元 \r\n\t\t\t\t\t<el-button type=\"warning\" v-show=\"info.payMoney > 0\" plain @click=\"settlement\">结算</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" style=\"width: 100%\" tooltip-effect=\"dark\" @selection-change=\"handleSelectionChange\" :header-cell-style=\"{background:'#eef1f6',color:'#606266'}\">\r\n\t\t\t\t<el-table-column type=\"selection\" width=\"45\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"订单号\" width=\"200\" align=\"center\" tooltip-effect=\"dark\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{scope.row.ID}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"下单时间\" width=\"150\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{scope.row.InsertTime | time}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"行程信息\" width=\"150\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{scope.row.StartPositionCityName}} → {{scope.row.EndPostionCityName}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"包车金额\" width=\"95\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{scope.row.TotalMoney}} 元</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"定金金额\" width=\"90\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div>{{scope.row.EarnestMoney}} 元</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"下欠款\" width=\"90\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div class=\"orderStatus\">{{scope.row.BalanceMoney}} 元</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"订单状态\" width=\"90\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<div class=\"orderStatus\">{{scope.row.OrderStatus | orderStatus}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column type=\"expand\" width=\"30\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-form label-position=\"left\" class=\"demo-table-expand flex flex-wrap\">\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>包租车：</span>{{scope.row.TravelTypeName}} {{scope.row.TravelFormTypeName}}</div>\r\n\t\t\t\t\t\t\t<!-- <div class=\"item-in\"><span>下单人：</span>{{scope.row.NickName}}</div> -->\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>出发时间：</span>{{scope.row.StartTime | time}}</div>\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>达到时间：</span>{{scope.row.EndTime | time}}</div>\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>所属公司：</span>{{scope.row.EnterpriseName}}</div>\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>已付款：</span>{{scope.row.ReceivedMoney}}元</div>\r\n\t\t\t\t\t\t\t<div class=\"item-in\"><span>结算状态：</span><b class=\"orderStatus\">{{scope.row.SettleType | settleType}}</b></div>\r\n\t\t\t\t\t\t</el-form>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination v-if=\"TotalCount > 5\" :page-size=\"pageSize\" @current-change=\"change\" background layout=\"prev, pager, next\" :total=\"TotalCount\"></el-pagination>\r\n\t\t</div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetUnSettleOrderList,\r\n\t\tsettleOrder\r\n\t} from '../../../assets/js/api.js';\r\n\timport tl from '../../../assets/tl.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsearch: {\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t\ttime: [],\r\n\t\t\t\t\tkey: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\tTotalCount: 0,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tinfo: {\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\tTotalMoney: 0,\r\n\t\t\t\t\tDebtMoney: 0,\r\n\t\t\t\t\tpayMoney: 0\r\n\t\t\t\t},\r\n\t\t\t\tloading: true,\r\n\t\t\t\tidList:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\ttime(str) {\r\n\t\t\t\tif (typeof str == 'string') {\r\n\t\t\t\t\treturn str.substr(0, 16)\r\n\t\t\t\t}\r\n\t\t\t\treturn str\r\n\t\t\t},\r\n\t\t\torderStatus(num) {\r\n\t\t\t\treturn tl.orderStatus(num)\r\n\t\t\t},\r\n\t\t\tsettleType(num) {\r\n\t\t\t\treturn tl.settleType(num)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsettlement(){\r\n\t\t\t\tvar list = this.idList.join(',');\r\n\t\t\t\tconst loading = this.$loading({\r\n\t\t\t\t\tlock: true,\r\n\t\t\t\t\ttext: '正在前往结算，请稍等...',\r\n\t\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t\t});\r\n\t\t\t\tsettleOrder(list).then(res => {\r\n\t\t\t\t\tloading.close();\r\n\t\t\t\t\tif(res.Code == 1){\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"LddPayInfo\");\r\n\t\t\t\t\t\tlet routeUrl = this.$router.resolve({\r\n\t\t\t\t\t\tpath: '/pay?id=' + encodeURIComponent(res.Data)+\"&m=\"+this.info.payMoney+\"&bt=2&ot=3\"\r\n\t\t\t\t\t  });\r\n\t\t\t\t\t\twindow.open(routeUrl.href, '_blank');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttl.toast(res.Msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleSelectionChange(e){\r\n\t\t\t\tvar money = 0;\r\n\t\t\t\tvar list = []\r\n\t\t\t\te.forEach(item =>{\r\n\t\t\t\t\tmoney+=item.BalanceMoney;\r\n\t\t\t\t\tlist.push(item.ID)\r\n\t\t\t\t})\r\n\t\t\t\tthis.info.payMoney = money;\r\n\t\t\t\tthis.idList = list;\r\n\t\t\t},\r\n\t\t\tchange(val) {\r\n\t\t\t\tthis.pageIndex = val;\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t//获取列表\r\n\t\t\tgetList() {\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tPageIndex: this.pageIndex,\r\n\t\t\t\t\tPageSize: this.pageSize,\r\n\t\t\t\t\tID: this.search.id,\r\n\t\t\t\t\tStartTime: \"\",\r\n\t\t\t\t\tEndTime: \"\",\r\n\t\t\t\t\tKey: this.search.key\r\n\t\t\t\t}\r\n\t\t\t\tif (this.search.time.length) {\r\n\t\t\t\t\tdata.StartTime = this.search.time[0];\r\n\t\t\t\t\tdata.EndTime = this.search.time[1];\r\n\t\t\t\t}\r\n\t\t\t\tthis.loading = true;\r\n\r\n\t\t\t\tgetUnSettleOrderList(data).then(res => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tif (res.Code == 1) {\r\n\t\t\t\t\t\tthis.info.total = res.TotalCount;\r\n\t\t\t\t\t\tthis.info.TotalMoney = res.DataExpand.TotalMoney ? res.DataExpand.TotalMoney : 0;\r\n\t\t\t\t\t\tthis.info.DebtMoney = res.DataExpand.DebtMoney ? res.DataExpand.DebtMoney : 0;\r\n\t\t\t\t\t\tthis.TotalCount = res.TotalCount;\r\n\t\t\t\t\t\tthis.tableData = res.Data;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonSubmit() {\r\n\t\t\t\tthis.pageIndex = 1;\r\n\t\t\t\tthis.getList();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\t@import '../../../assets/less/common.less';\r\n\r\n\t.el-button {\r\n\t\tmargin: 3px 0;\r\n\t}\r\n\r\n\t.order {\r\n\t\t.orderStatus {\r\n\t\t\tcolor: #E6A23C;\r\n\t\t}\r\n\r\n\t\t.money {\r\n\t\t\tcolor: @red;\r\n\t\t}\r\n\r\n\t\t.el-dropdown-link {\r\n\t\t\tcursor: pointer;\r\n\t\t\tcolor: @red;\r\n\t\t}\r\n\r\n\t\t.result {\r\n\t\t\tfont-size: 16px;\r\n\t\t\theight: 60px;\r\n\t\t\tline-height: 60px;\r\n\t\t\tcolor: #606266;\r\n\r\n\t\t\tspan {\r\n\t\t\t\tcolor: @red;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.orderTable {\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\r\n\t\t.demo-table-expand {\r\n\t\t\t.item-in {\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t\tpadding: 5px 0;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\twidth: 33.33%;\r\n\t\t\t\tspan {\r\n\t\t\t\t\tcolor: #606266;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.title {\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: @c3;\r\n\t\tfont-weight: bold;\r\n\t\tborder-bottom: 1px solid @cd;\r\n\t\tpadding: 0 20px;\r\n\t}\r\n\r\n\t.demo-form-inline {\r\n\t\tpadding: 15px 20px;\r\n\t\tborder-bottom: 1px solid @cd;\r\n\r\n\t\t.el-form-item {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t}\r\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/protocolBill/unsettle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"未结算订单查询\")]),_vm._v(\" \"),_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.search}},[_c('el-form-item',{attrs:{\"label\":\"订单编号\"}},[_c('el-input',{staticStyle:{\"width\":\"180px\"},attrs:{\"placeholder\":\"订单编号\"},model:{value:(_vm.search.id),callback:function ($$v) {_vm.$set(_vm.search, \"id\", $$v)},expression:\"search.id\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"下单时间\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"250px\"},attrs:{\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"type\":\"daterange\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"default-time\":['00:00:00', '23:59:59']},model:{value:(_vm.search.time),callback:function ($$v) {_vm.$set(_vm.search, \"time\", $$v)},expression:\"search.time\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"关键字\"}},[_c('el-input',{staticStyle:{\"width\":\"170px\"},attrs:{\"placeholder\":\"客企名\\\\员工名称\\\\行程\"},model:{value:(_vm.search.key),callback:function ($$v) {_vm.$set(_vm.search, \"key\", $$v)},expression:\"search.key\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"orderTable\"},[_c('div',{staticClass:\"result flex flex-pack-justify\"},[_c('div',[_vm._v(\"结果汇总：当前数据 \"),_c('span',{staticClass:\"red\"},[_vm._v(_vm._s(_vm.info.total))]),_vm._v(\" 条，订单总金额 \"),_c('span',{staticClass:\"red\"},[_vm._v(_vm._s(_vm.info.TotalMoney))]),_vm._v(\" 元，下欠金额\\n\\t\\t\\t\\t\"),_c('span',{staticClass:\"red\"},[_vm._v(_vm._s(_vm.info.DebtMoney))]),_vm._v(\" 元\")]),_vm._v(\" \"),_c('div',[_vm._v(\"应付总额：\"),_c('span',{staticClass:\"red\"},[_vm._v(_vm._s(_vm.info.payMoney))]),_vm._v(\"元 \\n\\t\\t\\t\\t\"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.info.payMoney > 0),expression:\"info.payMoney > 0\"}],attrs:{\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":_vm.settlement}},[_vm._v(\"结算\")])],1)]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"tooltip-effect\":\"dark\",\"header-cell-style\":{background:'#eef1f6',color:'#606266'}},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"45\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单号\",\"width\":\"200\",\"align\":\"center\",\"tooltip-effect\":\"dark\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.ID))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"下单时间\",\"width\":\"150\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(_vm._f(\"time\")(scope.row.InsertTime)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"行程信息\",\"width\":\"150\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.StartPositionCityName)+\" → \"+_vm._s(scope.row.EndPostionCityName))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"包车金额\",\"width\":\"95\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.TotalMoney)+\" 元\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"定金金额\",\"width\":\"90\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(_vm._s(scope.row.EarnestMoney)+\" 元\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"下欠款\",\"width\":\"90\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"orderStatus\"},[_vm._v(_vm._s(scope.row.BalanceMoney)+\" 元\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单状态\",\"width\":\"90\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"orderStatus\"},[_vm._v(_vm._s(_vm._f(\"orderStatus\")(scope.row.OrderStatus)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"type\":\"expand\",\"width\":\"30\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form',{staticClass:\"demo-table-expand flex flex-wrap\",attrs:{\"label-position\":\"left\"}},[_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"包租车：\")]),_vm._v(_vm._s(scope.row.TravelTypeName)+\" \"+_vm._s(scope.row.TravelFormTypeName))]),_vm._v(\" \"),_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"出发时间：\")]),_vm._v(_vm._s(_vm._f(\"time\")(scope.row.StartTime)))]),_vm._v(\" \"),_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"达到时间：\")]),_vm._v(_vm._s(_vm._f(\"time\")(scope.row.EndTime)))]),_vm._v(\" \"),_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"所属公司：\")]),_vm._v(_vm._s(scope.row.EnterpriseName))]),_vm._v(\" \"),_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"已付款：\")]),_vm._v(_vm._s(scope.row.ReceivedMoney)+\"元\")]),_vm._v(\" \"),_c('div',{staticClass:\"item-in\"},[_c('span',[_vm._v(\"结算状态：\")]),_c('b',{staticClass:\"orderStatus\"},[_vm._v(_vm._s(_vm._f(\"settleType\")(scope.row.SettleType)))])])])]}}])})],1),_vm._v(\" \"),(_vm.TotalCount > 5)?_c('el-pagination',{attrs:{\"page-size\":_vm.pageSize,\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.TotalCount},on:{\"current-change\":_vm.change}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-701cb145\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/protocolBill/unsettle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-701cb145\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./unsettle.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./unsettle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./unsettle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-701cb145\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./unsettle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-701cb145\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/protocolBill/unsettle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}